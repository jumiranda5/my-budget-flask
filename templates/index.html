{% extends "layout.html" %}

{% block title %}
    Home
{% endblock %}

{% block main %}

    <h1>Home Page</h1>

    <!-- Month -->
    <div id="month-balance-div">
        <a id="month-link" href="/month/{{date.year}}/{{date.month}}">Click to open month</a>
        <h1 id="month-year">{{date.year}}</h1>
        <h2 id="month">{{date.month_name}}</h2>

        <input type="hidden" id="current-month-year" value="{{date.year}}">
        <input type="hidden" id="current-month" value="{{date.month}}">

        <button id="prev-month" type="button">Previous</button>
        <button id="next-month" type="button">Next</button>
        
        <p>Balance</p>
        <h3 id="month-total">{{balance.total}}</h3>
        <p>Income</p>
        <h3 id="month-income">{{balance.income}}</h3>
        <p>Expenses</p>
        <h3 id="month-out">{{balance.out}}</h3>
    </div>

    <!-- Year -->
    <div>
        <a href="/year/{{date.year}}">Click to open year</a>
        <h2 id="year">{{date.year}}</h2>
        <p>Year Balance</p>
        <h3 id="year-balance">{{year.balance}}</h3>

        <input type="hidden" id="current-year" value="{{date.year}}">

        <button id="prev-year" type="button">Previous</button>
        <button id="next-year" type="button">Next</button>

        <ul>
            {% for row in year.months %}
                <li>
                    <a class="year-month" href="/month/{{year.year}}/{{row.month}}">
                        <h4>{{row.month_name}}</h4>
                        <p>{{row.balance.total}}</p>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>

    <br>
    <br>

    <!-- Pending -->
    <div>
        <p>Total pending:</p>
        <h3>{{pending.total}}</h3>

        <table>
            <thead>
                <tr>
                    <th>Month</th>
                    <th>Day</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Type</th>
                    <th>Parcel</th>
                    <th>Payed</th>
                </tr>
            </thead>
            <tbody>
                {% for row in pending.rows %}
                    <tr>
                        <td>{{row.month}}</td>
                        <td>{{row.day}}</td>
                        <td>{{row.description}}</td>
                        <td>{{row.amount}}</td>
                        <td>{{row.type}}</td>
                        {% if row.parcels > 1 %}
                            <td>{{row.parcel}}/{{row.parcels}}</td>
                        {% else %}
                            <td></td>
                        {% endif %}
                        <td>
                            {% if row.payed == 1 %}
                                <input type="checkbox" class="{{row.id}}" id="edit-payed" name="edit-payed" value="payed" checked >
                            {% else %}
                                <input type="checkbox" class="{{row.id}}" id="edit-payed" name="edit-payed" value="payed">
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

    <br>
    <br>

{% endblock %}
