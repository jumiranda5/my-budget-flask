{% extends "layout.html" %}

{% block title %}
    Home
{% endblock %}

{% block main %}

    <h1>Home Page</h1>

    <!-- Month -->
    <div class="balance-container container" id="month-balance-div">

        <input type="hidden" id="current-month-year" value="{{date.year}}">
        <input type="hidden" id="current-month" value="{{date.month}}">

        <div class="balance-container-header flex">
            <p class="month-year" id="month-year">{{date.year}}</p>
            
            <div class="month-container flex">

                <button class="arrow-btn" id="prev-month" type="button">
                    <span class="material-symbols-sharp">arrow_back_ios</span>
                </button>
            
                <h2 class="month" id="month">
                    <a id="month-link" href="/month/{{date.year}}/{{date.month}}">{{date.month_name}}</a>
                </h2>
        
                <button class="arrow-btn" id="next-month" type="button">
                    <span class="material-symbols-sharp">arrow_forward_ios</span>
                </button>
            </div>

            <div class="month-year"></div>
        </div>
        
        <p id="month-total" class="month-balance">{{balance.total}}</p>

        <div class="balance-container-footer flex">

            <div class="flex">
                <span class="material-symbols-sharp in">call_received</span>
                <p id="month-income">{{balance.income}}</p>
            </div>

            <div class="flex">
                <span class="material-symbols-sharp out">call_made</span>
                <p id="month-out">{{balance.out}}</p>    
            </div>

        </div>
        
    </div>

    <!-- Year -->
    <div>
        <a href="/year/{{date.year}}">Click to open year</a>
        <h2 id="year">{{date.year}}</h2>
        <p>Year Balance</p>
        <h3 id="year-balance">{{year.balance}}</h3>

        <input type="hidden" id="current-year" value="{{date.year}}">

        <button id="prev-year" type="button">Previous</button>
        <button id="next-year" type="button">Next</button>

        <ul>
            {% for row in year.months %}
                <li>
                    <a class="year-month" href="/month/{{year.year}}/{{row.month}}">
                        <h4>{{row.month_name}}</h4>
                        <p>{{row.balance.total}}</p>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>

    <br>
    <br>

    <!-- Pending -->
    <div>
        <p>Total pending:</p>
        <h3>{{pending.total}}</h3>

        <table>
            <thead>
                <tr>
                    <th>Month</th>
                    <th>Day</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Type</th>
                    <th>Parcel</th>
                    <th>Payed</th>
                </tr>
            </thead>
            <tbody>
                {% for row in pending.rows %}
                    <tr>
                        <td>{{row.month}}</td>
                        <td>{{row.day}}</td>
                        <td>{{row.description}}</td>
                        <td>{{row.amount}}</td>
                        <td>{{row.type}}</td>
                        {% if row.parcels > 1 %}
                            <td>{{row.parcel}}/{{row.parcels}}</td>
                        {% else %}
                            <td></td>
                        {% endif %}
                        <td>
                            {% if row.payed == 1 %}
                                <input type="checkbox" class="{{row.id}}" id="edit-payed" name="edit-payed" value="payed" checked >
                            {% else %}
                                <input type="checkbox" class="{{row.id}}" id="edit-payed" name="edit-payed" value="payed">
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

    </div>

    <br>
    <br>

{% endblock %}
